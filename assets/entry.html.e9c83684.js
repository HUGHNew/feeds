import{r as t,o as c,c as o,a as n,b as l,F as r,e,d as s}from"./app.7d274c27.js";import{_ as p}from"./plugin-vue_export-helper.21dcd24c.js";const d={},i=e(`<h1 id="docker-command" tabindex="-1"><a class="header-anchor" href="#docker-command" aria-hidden="true">#</a> docker command</h1><blockquote><p>\u672C\u6587\u89E3\u91CA\u5728<code>Dockerfile</code>\u4E2D<code>CMD</code>\u548C<code>ENTRYPOINT</code>\u7684\u533A\u522B \u4EE5\u53CA\u5728\u4F7F\u7528\u662F\u4E0E\u547D\u4EE4\u884C\u53C2\u6570\u7684\u4EA4\u4E92\u60C5\u51B5</p></blockquote><div class="custom-container tip"><p class="custom-container-title">CMD/ENTRYPOINT \u7684\u4E24\u79CD\u683C\u5F0F</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># exec \u683C\u5F0F</span>
<span class="token comment"># \u8BE5\u683C\u5F0F\u4E0B Dockerfile \u547D\u4EE4\u7684\u503C\u4E3A JSON\u6570\u7EC4</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;cmd&quot;</span>,<span class="token string">&quot;param&quot;</span>]</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;cmd&quot;</span>,<span class="token string">&quot;param&quot;</span>]</span>
<span class="token comment"># shell \u683C\u5F0F</span>
<span class="token instruction"><span class="token keyword">CMD</span> cmd param</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> cmd param</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u5728\u5355\u4E00\u6307\u4EE4\u7684\u60C5\u51B5\u4E0B \u4E0D\u540C\u683C\u5F0F\u7684\u7B49\u4EF7\u6548\u679C</p><ul><li>exec \u683C\u5F0F:<code>cmd param</code></li><li>shell \u683C\u5F0F:<code>/bin/sh -c cmd param</code></li></ul></div><h2 id="entrypoint" tabindex="-1"><a class="header-anchor" href="#entrypoint" aria-hidden="true">#</a> ENTRYPOINT</h2><div class="custom-container danger"><p class="custom-container-title">\`ENTRYPOINT\`\u7684\u6CE8\u610F\u4E8B\u9879</p><p><code>ENTRYPOINT</code> \u7684 shell \u683C\u5F0F\u4F1A\u8986\u76D6 <code>CMD</code> \u548C run \u65F6\u7684\u547D\u4EE4\u884C\u53C2\u6570</p><p>Dockerfile \u4E2D \u6700\u540E\u4E00\u4E2A <code>ENTRYPOINT</code> \u624D\u6709\u6548(\u5BF9\u4E8E\u5B50\u955C\u50CF \u8FD9\u6761\u4F9D\u7136\u6210\u7ACB)</p></div><p><code>ENTRYPOINT</code> shell \u683C\u5F0F\u6709\u7B49\u4EF7\u7684 exec \u683C\u5F0F</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># \u4E0B\u9762\u4E24\u79CD\u683C\u5F0F\u7B49\u4EF7</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;/bin/sh&quot;</span>,<span class="token string">&quot;-c&quot;</span>,<span class="token string">&quot;cmd&quot;</span>,<span class="token string">&quot;param&quot;</span>]</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> cmd param</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="cmd" tabindex="-1"><a class="header-anchor" href="#cmd" aria-hidden="true">#</a> CMD</h2><p><code>CMD</code> \u4F1A\u591A\u4E00\u4E2A\u683C\u5F0F \u5C31\u662F\u5B8C\u5168\u4F5C\u4E3A <code>ENTRYPOINT</code> \u7684\u53C2\u6570(\u4F46\u5176\u5B9E\u6CA1\u533A\u522B)</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># (as default parameters to ENTRYPOINT)</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;param1&quot;</span>,<span class="token string">&quot;param2&quot;</span>]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="\u8FD0\u884C\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#\u8FD0\u884C\u5BB9\u5668" aria-hidden="true">#</a> \u8FD0\u884C\u5BB9\u5668</h2><p><code>docker run</code> \u65F6\u7684\u547D\u4EE4\u884C\u53C2\u6570\u4F1A\u8986\u76D6 <code>CMD</code></p><p><code>docker run --entrypoint</code> \u7684\u53C2\u6570\u53EF\u4EE5\u8986\u76D6 <code>ENTRYPOINT</code></p><h2 id="\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u793A\u4F8B" aria-hidden="true">#</a> \u793A\u4F8B</h2><p><code>sudo docker build -t hello .</code></p><p>\u5C06\u955C\u50CF\u547D\u4EE4\u4E3A hello</p><h3 id="shell-\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#shell-\u683C\u5F0F" aria-hidden="true">#</a> shell \u683C\u5F0F</h3><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> alpine</span>

<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> echo hello</span>
<span class="token instruction"><span class="token keyword">CMD</span> [ <span class="token string">&quot;echo&quot;</span>,<span class="token string">&quot;world;&quot;</span> ]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">docker</span> run hello
hello

$ <span class="token function">sudo</span> <span class="token function">docker</span> run hello world
hello
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u53EF\u4EE5\u770B\u51FA shell \u683C\u5F0F\u7684 <code>ENTRYPOINT</code> \u4F1A\u8986\u76D6\u6389\u547D\u4EE4\u884C\u53C2\u6570\u548C <code>CMD</code></p><h3 id="exec-\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#exec-\u683C\u5F0F" aria-hidden="true">#</a> exec \u683C\u5F0F</h3><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> alpine</span>

<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;echo&quot;</span>, <span class="token string">&quot;hello;&quot;</span>]</span>
<span class="token instruction"><span class="token keyword">CMD</span> [ <span class="token string">&quot;echo&quot;</span>,<span class="token string">&quot;world;&quot;</span> ]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># echo &quot;hello; echo world&quot;</span>
$ <span class="token function">sudo</span> <span class="token function">docker</span> run hello
hello<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> world<span class="token punctuation">;</span>

<span class="token comment"># echo &quot;hello; world&quot;</span>
$ <span class="token function">sudo</span> <span class="token function">docker</span> run hello world
hello<span class="token punctuation">;</span> world

<span class="token comment"># echo &quot;world&quot;</span>
$ <span class="token function">sudo</span> <span class="token function">docker</span> run --entrypoint <span class="token builtin class-name">echo</span> hello world
world
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">CMD\u7684\u53C2\u6570\u5F62\u5F0F</p><p>\u4ECE\u4E0A\u9762\u7684\u4F8B\u5B50\u4E2D \u53EF\u4EE5\u770B\u51FA <code>CMD</code> \u5E76\u5165 <code>ENTRYPOINT</code> \u7684\u65B9\u5F0F\u5C31\u662F\u5C06 <code>CMD</code> \u5217\u8868\u4E2D\u7684\u503C\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 <code>ENTRYPOINT</code> \u6267\u884C</p></div>`,24),u={id:"\u5B98\u65B9\u6587\u6863",tabindex:"-1"},m=n("a",{class:"header-anchor",href:"#\u5B98\u65B9\u6587\u6863","aria-hidden":"true"},"#",-1),b=s(),h={href:"https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact",target:"_blank",rel:"noopener noreferrer"},k=s("\u5B98\u65B9\u6587\u6863"),g=e('<table><thead><tr><th style="text-align:left;"></th><th style="text-align:left;">No ENTRYPOINT</th><th style="text-align:left;">ENTRYPOINT exec_entry p1_entry</th><th>ENTRYPOINT [\u201Cexec_entry\u201D, \u201Cp1_entry\u201D]</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>No CMD</strong></td><td style="text-align:left;"><em>error, not allowed</em></td><td style="text-align:left;">/bin/sh -c exec_entry p1_entry</td><td>exec_entry p1_entry</td></tr><tr><td style="text-align:left;"><strong>CMD [\u201Cexec_cmd\u201D, \u201Cp1_cmd\u201D]</strong></td><td style="text-align:left;">exec_cmd p1_cmd</td><td style="text-align:left;">/bin/sh -c exec_entry p1_entry</td><td>exec_entry p1_entry exec_cmd p1_cmd</td></tr><tr><td style="text-align:left;"><strong>CMD [\u201Cp1_cmd\u201D, \u201Cp2_cmd\u201D]</strong></td><td style="text-align:left;">p1_cmd p2_cmd</td><td style="text-align:left;">/bin/sh -c exec_entry p1_entry</td><td>exec_entry p1_entry p1_cmd p2_cmd</td></tr><tr><td style="text-align:left;"><strong>CMD exec_cmd p1_cmd</strong></td><td style="text-align:left;">/bin/sh -c exec_cmd p1_cmd</td><td style="text-align:left;">/bin/sh -c exec_entry p1_entry</td><td>exec_entry p1_entry /bin/sh -c exec_cmd p1_cmd</td></tr></tbody></table><blockquote><p>If <code>CMD</code> is defined from the base image, setting <code>ENTRYPOINT</code> will reset <code>CMD</code> to an empty value. In this scenario, <code>CMD</code> must be defined in the current image to have a value.</p></blockquote><blockquote><p>\u8BBE\u7F6E <code>ENTRYPOINT</code> \u4F1A\u5C06\u57FA\u7840\u955C\u50CF\u4E2D\u7684 <code>CMD</code> \u7F6E\u7A7A(\u5982\u679C\u6709) \u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B <code>CMD</code> \u53EA\u80FD\u5728\u5F53\u524D\u955C\u50CF\u4E2D\u5B9A\u4E49</p></blockquote>',3);function _(x,y){const a=t("ExternalLinkIcon");return c(),o(r,null,[i,n("h2",u,[m,b,n("a",h,[k,l(a)])]),g],64)}var T=p(d,[["render",_]]);export{T as default};
